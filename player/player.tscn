[gd_scene load_steps=121 format=3 uid="uid://hm7oj8v2rsqi"]

[ext_resource type="Script" uid="uid://dvjwieltpuamp" path="res://player/player_controller.gd" id="1_oul6g"]
[ext_resource type="PackedScene" uid="uid://1xp2dovahsx0" path="res://player/launch_particles.tscn" id="2_bjvpn"]
[ext_resource type="Script" uid="uid://bt4oph17ec2nu" path="res://player/fsm/fsm.gd" id="2_g1dw6"]
[ext_resource type="Script" uid="uid://buwvbiq0ioyxy" path="res://player/sprite_rotator.gd" id="3_boad6"]
[ext_resource type="PackedScene" uid="uid://cq0aroif6k4pw" path="res://player/switch_particles.tscn" id="3_g4c7l"]
[ext_resource type="Script" uid="uid://dcwvuoxvxlfmy" path="res://player/fsm/states/move_state.gd" id="3_yw30f"]
[ext_resource type="Texture2D" uid="uid://d2uc0hh0p847n" path="res://player/sprites/penguin_blue_fall.png" id="4_g4c7l"]
[ext_resource type="Script" uid="uid://px1mh8b1hl2l" path="res://player/fsm/states/floor_magnet_state.gd" id="4_yw30f"]
[ext_resource type="Texture2D" uid="uid://bfw55eaal722t" path="res://player/sprites/penguin_blue_idle.png" id="5_g4c7l"]
[ext_resource type="Script" uid="uid://bubvej7er7kn7" path="res://player/fsm/states/radial_magnet_state.gd" id="5_qjkh3"]
[ext_resource type="Texture2D" uid="uid://22g2qck5sggk" path="res://player/sprites/penguin_blue2red.png" id="6_g4c7l"]
[ext_resource type="Texture2D" uid="uid://capv4gyuii67c" path="res://player/sprites/penguin_blue_walk.png" id="7_knn7v"]
[ext_resource type="Texture2D" uid="uid://bq1pshhl1h30w" path="res://player/sprites/penguin_red_fall.png" id="8_knn7v"]
[ext_resource type="Texture2D" uid="uid://by1qihrp4uy1r" path="res://player/sprites/penguin_red_idle.png" id="9_g4c7l"]
[ext_resource type="Texture2D" uid="uid://m0e8dsgm3f2b" path="res://player/sprites/penguin_red2blue.png" id="10_g4c7l"]
[ext_resource type="Texture2D" uid="uid://j3l516xjrwim" path="res://player/sprites/penguin_red_walk.png" id="12_knn7v"]
[ext_resource type="AudioStream" uid="uid://dee5gh5jx042s" path="res://audio/magnetic_hum.ogg" id="13_kb6p2"]
[ext_resource type="Script" uid="uid://dp1be5tpng3j0" path="res://player/mag_hum.gd" id="13_yllr7"]
[ext_resource type="PackedScene" uid="uid://2huyglqjk7el" path="res://player/sprites/launch_particles/launch_particles.tscn" id="14_x7c3f"]
[ext_resource type="Script" uid="uid://bpybw4dwc5j2o" path="res://player/shaker.gd" id="15_65viv"]
[ext_resource type="AudioStream" uid="uid://c3eq7q8tnkxid" path="res://audio/step.wav" id="17_tqiix"]
[ext_resource type="AudioStream" uid="uid://rafi1ja4bldr" path="res://audio/whoosh.ogg" id="18_e7oew"]
[ext_resource type="AudioStream" uid="uid://7kfixaryqml" path="res://audio/doing.ogg" id="19_c35mf"]
[ext_resource type="AudioStream" uid="uid://byu6h1cuf77yb" path="res://audio/switch.wav" id="23_s7qer"]

[sub_resource type="AtlasTexture" id="AtlasTexture_ge24q"]
atlas = ExtResource("4_g4c7l")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_pnw6m"]
atlas = ExtResource("4_g4c7l")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_b8hi5"]
atlas = ExtResource("5_g4c7l")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_knn7v"]
atlas = ExtResource("6_g4c7l")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_7pqkx"]
atlas = ExtResource("6_g4c7l")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_uw77l"]
atlas = ExtResource("6_g4c7l")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_rptt4"]
atlas = ExtResource("6_g4c7l")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_r7pn3"]
atlas = ExtResource("6_g4c7l")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8pxes"]
atlas = ExtResource("6_g4c7l")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_fmu53"]
atlas = ExtResource("6_g4c7l")
region = Rect2(96, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_w7j2h"]
atlas = ExtResource("6_g4c7l")
region = Rect2(112, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_35wys"]
atlas = ExtResource("6_g4c7l")
region = Rect2(128, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_2uvqg"]
atlas = ExtResource("7_knn7v")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_1s1yo"]
atlas = ExtResource("7_knn7v")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_5ejfk"]
atlas = ExtResource("7_knn7v")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_jd2rm"]
atlas = ExtResource("7_knn7v")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_q28gw"]
atlas = ExtResource("7_knn7v")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_j55il"]
atlas = ExtResource("7_knn7v")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_hjies"]
atlas = ExtResource("7_knn7v")
region = Rect2(96, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_mmwog"]
atlas = ExtResource("7_knn7v")
region = Rect2(112, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_1so5t"]
atlas = ExtResource("8_knn7v")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_55jnj"]
atlas = ExtResource("8_knn7v")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_art4l"]
atlas = ExtResource("9_g4c7l")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_fjxoa"]
atlas = ExtResource("10_g4c7l")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_gswnw"]
atlas = ExtResource("10_g4c7l")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_xcnuv"]
atlas = ExtResource("10_g4c7l")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_n0b8q"]
atlas = ExtResource("10_g4c7l")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_jfgyi"]
atlas = ExtResource("10_g4c7l")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_237xx"]
atlas = ExtResource("10_g4c7l")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_wpyo2"]
atlas = ExtResource("10_g4c7l")
region = Rect2(96, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_7crtr"]
atlas = ExtResource("10_g4c7l")
region = Rect2(112, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_vgvch"]
atlas = ExtResource("10_g4c7l")
region = Rect2(128, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8rogd"]
atlas = ExtResource("12_knn7v")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_48p26"]
atlas = ExtResource("12_knn7v")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_anp34"]
atlas = ExtResource("12_knn7v")
region = Rect2(32, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_jdjat"]
atlas = ExtResource("12_knn7v")
region = Rect2(48, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_j420s"]
atlas = ExtResource("12_knn7v")
region = Rect2(64, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_kcq4v"]
atlas = ExtResource("12_knn7v")
region = Rect2(80, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_qavcc"]
atlas = ExtResource("12_knn7v")
region = Rect2(96, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_bd26m"]
atlas = ExtResource("12_knn7v")
region = Rect2(112, 0, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_j55il"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ge24q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pnw6m")
}],
"loop": true,
"name": &"blue_fly",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_b8hi5")
}],
"loop": true,
"name": &"blue_idle",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_knn7v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7pqkx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uw77l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rptt4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r7pn3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8pxes")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fmu53")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w7j2h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_35wys")
}],
"loop": false,
"name": &"blue_to_red",
"speed": 24.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2uvqg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1s1yo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5ejfk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jd2rm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q28gw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j55il")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hjies")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mmwog")
}],
"loop": true,
"name": &"blue_walk",
"speed": 24.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_1so5t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_55jnj")
}],
"loop": true,
"name": &"red_fly",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_art4l")
}],
"loop": true,
"name": &"red_idle",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fjxoa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gswnw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xcnuv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n0b8q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jfgyi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_237xx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wpyo2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7crtr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vgvch")
}],
"loop": false,
"name": &"red_to_blue",
"speed": 24.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_8rogd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_48p26")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_anp34")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jdjat")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j420s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kcq4v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qavcc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bd26m")
}],
"loop": true,
"name": &"red_walk",
"speed": 24.0
}]

[sub_resource type="Gradient" id="Gradient_g4c7l"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_knn7v"]
gradient = SubResource("Gradient_g4c7l")
width = 4
height = 10

[sub_resource type="Curve" id="Curve_7pqkx"]
_data = [Vector2(0, 0.37299), 0.0, 0.0, 0, 0, Vector2(0.37931, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_uw77l"]
curve = SubResource("Curve_7pqkx")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_rptt4"]
particle_flag_align_y = true
particle_flag_disable_z = true
angle_min = 1.07288e-05
angle_max = 1.07288e-05
direction = Vector3(0, 0, 0)
spread = 180.0
flatness = 1.0
initial_velocity_min = 50.0
initial_velocity_max = 80.0
gravity = Vector3(0, 0, 0)
scale_min = 0.4
scale_max = 0.4
scale_curve = SubResource("CurveTexture_uw77l")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g4c7l"]
size = Vector2(15.999, 15.999)

[sub_resource type="CircleShape2D" id="CircleShape2D_oul6g"]
radius = 6.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_c35mf"]
random_pitch = 1.2
streams_count = 1
stream_0/stream = ExtResource("18_e7oew")

[sub_resource type="Animation" id="Animation_1s1yo"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Audio/Stepping:playing")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}

[sub_resource type="Animation" id="Animation_j3r50"]
length = 0.133337
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["blue_fly"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0666667, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0, 1, 5]
}

[sub_resource type="Animation" id="Animation_a1u5o"]
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["blue_idle"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5]
}

[sub_resource type="Animation" id="Animation_hjies"]
length = 0.300003
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["blue_to_red"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333, 0.266667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8]
}

[sub_resource type="Animation" id="Animation_mmwog"]
length = 0.26667
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["blue_walk"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5, 0, 0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Audio/Stepping:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(3.46452e-07, 0.133333),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, true]
}

[sub_resource type="Animation" id="Animation_utr5e"]
length = 0.133337
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["red_fly"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0666667, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0, 1, 5]
}

[sub_resource type="Animation" id="Animation_3dxkp"]
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["red_idle"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5]
}

[sub_resource type="Animation" id="Animation_8pxes"]
length = 0.300003
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["red_to_blue"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333, 0.266667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8]
}

[sub_resource type="Animation" id="Animation_fmu53"]
length = 0.26667
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": ["red_walk"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:frame")
tracks/1/interp = 0
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.0666667, 0.1, 0.133333, 0.166667, 0.2, 0.233333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0, 1, 2, 3, 4, 5, 6, 7]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Audio/Stepping:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.0333333, 0.166667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w7j2h"]
_data = {
&"RESET": SubResource("Animation_1s1yo"),
&"blue_fly": SubResource("Animation_j3r50"),
&"blue_idle": SubResource("Animation_a1u5o"),
&"blue_to_red": SubResource("Animation_hjies"),
&"blue_walk": SubResource("Animation_mmwog"),
&"red_fly": SubResource("Animation_utr5e"),
&"red_idle": SubResource("Animation_3dxkp"),
&"red_to_blue": SubResource("Animation_8pxes"),
&"red_walk": SubResource("Animation_fmu53")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_knn7v"]
animation = &"red_fly"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7pqkx"]
animation = &"blue_fly"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_knn7v"]
blend_point_0/node = SubResource("AnimationNodeAnimation_knn7v")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_7pqkx")
blend_point_1/pos = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6wior"]
animation = &"red_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p5tca"]
animation = &"blue_idle"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_n0b8q"]
blend_point_0/node = SubResource("AnimationNodeAnimation_6wior")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_p5tca")
blend_point_1/pos = 1.0
min_space = 0.0
value_label = "pole"
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jfgyi"]
animation = &"blue_to_red"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_237xx"]
animation = &"red_to_blue"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jbx34"]
animation = &"blue_to_red"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_s3g0c"]
animation = &"blue_to_red"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_wpyo2"]
blend_point_0/node = SubResource("AnimationNodeAnimation_jfgyi")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_237xx")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_jbx34")
blend_point_2/pos = 0.0
blend_point_3/node = SubResource("AnimationNodeAnimation_s3g0c")
blend_point_3/pos = 1.0
min_space = 0.0
value_label = "pole"
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7crtr"]
animation = &"red_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vgvch"]
animation = &"blue_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_35wys"]
animation = &"red_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pjwc4"]
animation = &"blue_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kb6p2"]
animation = &"blue_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wodsf"]
animation = &"red_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_32hag"]
animation = &"blue_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tqiix"]
animation = &"red_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e7oew"]
animation = &"red_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_c35mf"]
animation = &"red_walk"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_a1u5o"]
blend_point_0/node = SubResource("AnimationNodeAnimation_7crtr")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_vgvch")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_35wys")
blend_point_2/pos = 0.0
blend_point_3/node = SubResource("AnimationNodeAnimation_pjwc4")
blend_point_3/pos = 1.0
blend_point_4/node = SubResource("AnimationNodeAnimation_kb6p2")
blend_point_4/pos = 1.0
blend_point_5/node = SubResource("AnimationNodeAnimation_wodsf")
blend_point_5/pos = 0.0
blend_point_6/node = SubResource("AnimationNodeAnimation_32hag")
blend_point_6/pos = 1.0
blend_point_7/node = SubResource("AnimationNodeAnimation_tqiix")
blend_point_7/pos = 0.0
blend_point_8/node = SubResource("AnimationNodeAnimation_e7oew")
blend_point_8/pos = 0.0
blend_point_9/node = SubResource("AnimationNodeAnimation_c35mf")
blend_point_9/pos = 0.0
min_space = 0.0
value_label = "pole"
blend_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3dxkp"]
advance_mode = 2
advance_condition = &"switched_pole"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6wior"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p5tca"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jbx34"]
advance_mode = 2
advance_condition = &"switched_pole"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_s3g0c"]
advance_mode = 2
advance_condition = &"idling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_35wys"]
advance_mode = 2
advance_condition = &"walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pjwc4"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7pqkx"]
advance_mode = 2
advance_condition = &"switched_pole"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uw77l"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rptt4"]
advance_mode = 2
advance_condition = &"walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r7pn3"]
advance_mode = 2
advance_condition = &"flying"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b8hi5"]
advance_mode = 2
advance_condition = &"flying"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2uvqg"]
advance_mode = 2
advance_condition = &"idling"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_or4qq"]
states/End/position = Vector2(902, 100)
states/Flying/node = SubResource("AnimationNodeBlendSpace1D_knn7v")
states/Flying/position = Vector2(655, 198)
states/Idle/node = SubResource("AnimationNodeBlendSpace1D_n0b8q")
states/Idle/position = Vector2(311, 198)
states/Start/position = Vector2(146, 100)
states/SwitchPole/node = SubResource("AnimationNodeBlendSpace1D_wpyo2")
states/SwitchPole/position = Vector2(495, 141)
states/Walk/node = SubResource("AnimationNodeBlendSpace1D_a1u5o")
states/Walk/position = Vector2(495, 37)
transitions = ["Walk", "SwitchPole", SubResource("AnimationNodeStateMachineTransition_3dxkp"), "SwitchPole", "Walk", SubResource("AnimationNodeStateMachineTransition_6wior"), "SwitchPole", "Idle", SubResource("AnimationNodeStateMachineTransition_p5tca"), "Idle", "SwitchPole", SubResource("AnimationNodeStateMachineTransition_jbx34"), "Walk", "Idle", SubResource("AnimationNodeStateMachineTransition_s3g0c"), "Idle", "Walk", SubResource("AnimationNodeStateMachineTransition_35wys"), "Start", "Idle", SubResource("AnimationNodeStateMachineTransition_pjwc4"), "Flying", "SwitchPole", SubResource("AnimationNodeStateMachineTransition_7pqkx"), "SwitchPole", "Flying", SubResource("AnimationNodeStateMachineTransition_uw77l"), "Flying", "Walk", SubResource("AnimationNodeStateMachineTransition_rptt4"), "Walk", "Flying", SubResource("AnimationNodeStateMachineTransition_r7pn3"), "Idle", "Flying", SubResource("AnimationNodeStateMachineTransition_b8hi5"), "Flying", "Idle", SubResource("AnimationNodeStateMachineTransition_2uvqg")]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_knn7v"]
size = Vector2(15, 1.5)

[node name="Player" type="CharacterBody2D" node_paths=PackedStringArray("radial_magnet_state", "anim_tree", "switched", "switch_particles")]
script = ExtResource("1_oul6g")
speed = 10.0
acceleration_time = 0.3
deceleration_time = 0.3
jump_height = 5.0
gravity_direction = Vector2i(0, -1)
radial_magnet_state = NodePath("StateMachine/radial_magnet_state")
anim_tree = NodePath("Animations/AnimationTree")
switched = NodePath("Audio/Switch")
switch_particles = NodePath("Sprite/Particles/SwitchParticles")
color_north = Color(0, 0.616667, 1, 1)
color_south = Color(1, 0, 0, 1)

[node name="Sprite" type="AnimatedSprite2D" parent="."]
z_index = 3
sprite_frames = SubResource("SpriteFrames_j55il")
animation = &"red_idle"
script = ExtResource("3_boad6")

[node name="Particles" type="Node2D" parent="Sprite"]

[node name="LaunchParticles" parent="Sprite/Particles" instance=ExtResource("2_bjvpn")]
position = Vector2(0, 8)

[node name="SwitchParticles" parent="Sprite/Particles" instance=ExtResource("3_g4c7l")]
amount = 20
texture = SubResource("GradientTexture2D_knn7v")
lifetime = 0.4
process_material = SubResource("ParticleProcessMaterial_rptt4")

[node name="RayCast2D" type="RayCast2D" parent="Sprite"]
position = Vector2(0, 6)
target_position = Vector2(0, 6)

[node name="Collider" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_g4c7l")

[node name="AttractionArea" type="Area2D" parent="."]
visible = false
collision_layer = 2
collision_mask = 2

[node name="Collider" type="CollisionShape2D" parent="AttractionArea"]
shape = SubResource("CircleShape2D_oul6g")
debug_color = Color(0, 0.644725, 0.275107, 0.42)

[node name="Label" type="Label" parent="."]
unique_name_in_owner = true
visible = false
offset_right = 40.0
offset_bottom = 23.0

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("2_g1dw6")
starting_state = NodePath("move_state")

[node name="move_state" type="Node" parent="StateMachine" node_paths=PackedStringArray("floor_magnet_state", "radial_magnet_state", "doing", "magnet_check_raycast")]
script = ExtResource("3_yw30f")
floor_magnet_state = NodePath("../floor_magnet_state")
radial_magnet_state = NodePath("../radial_magnet_state")
doing = NodePath("../../Audio/Doing")
magnet_check_raycast = NodePath("../../Sprite/RayCast2D")
metadata/_custom_type_script = "uid://bgm0tvh7wkq7i"

[node name="floor_magnet_state" type="Node" parent="StateMachine" node_paths=PackedStringArray("move_state", "timer", "afterimage_timer", "whoosh", "launch_particles", "camera", "sprite")]
script = ExtResource("4_yw30f")
move_state = NodePath("../move_state")
timer = NodePath("Timer")
afterimage_timer = NodePath("AfterimageTimer")
whoosh = NodePath("../../Audio/Whoosh")
launch_particles = NodePath("../../Sprite/Particles/LaunchParticles")
camera = NodePath("../../Camera")
shake_intensity = 2.0
shake_time = 0.4
floor_launch_particles = ExtResource("14_x7c3f")
sprite = NodePath("../../Sprite")
metadata/_custom_type_script = "uid://bgm0tvh7wkq7i"

[node name="Timer" type="Timer" parent="StateMachine/floor_magnet_state"]
process_callback = 0
wait_time = 0.3
one_shot = true

[node name="AfterimageTimer" type="Timer" parent="StateMachine/floor_magnet_state"]
wait_time = 0.05

[node name="radial_magnet_state" type="Node" parent="StateMachine" node_paths=PackedStringArray("move_state", "doing", "launch_particles", "camera")]
script = ExtResource("5_qjkh3")
move_state = NodePath("../move_state")
custom_rotation_speed = 6.0
doing = NodePath("../../Audio/Whoosh")
launch_particles = NodePath("../../Sprite/Particles/LaunchParticles")
camera = NodePath("../../Camera")
shake_intensity = 2.0
shake_time = 0.4
ejection_force = 20.0
metadata/_custom_type_script = "uid://bgm0tvh7wkq7i"

[node name="Camera" type="Camera2D" parent="."]
position = Vector2(0, 1)
zoom = Vector2(2, 2)
process_callback = 0
position_smoothing_enabled = true
position_smoothing_speed = 8.0
script = ExtResource("15_65viv")

[node name="Audio" type="Node" parent="."]

[node name="MagHum" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("13_kb6p2")
autoplay = true
script = ExtResource("13_yllr7")
fade_in = 0.3
fade_out = 0.2
high_pitch = 0.9
low_volume = -20.0
high_volume = -5.0

[node name="Stepping" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("17_tqiix")

[node name="Whoosh" type="AudioStreamPlayer" parent="Audio"]
stream = SubResource("AudioStreamRandomizer_c35mf")

[node name="Doing" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("19_c35mf")
volume_db = -10.4

[node name="Switch" type="AudioStreamPlayer" parent="Audio"]
stream = ExtResource("23_s7qer")
volume_db = -9.787

[node name="Animations" type="Node" parent="."]

[node name="AnimationPlayer" type="AnimationPlayer" parent="Animations"]
root_node = NodePath("../..")
libraries = {
&"": SubResource("AnimationLibrary_w7j2h")
}

[node name="AnimationTree" type="AnimationTree" parent="Animations"]
root_node = NodePath("../..")
callback_mode_discrete = 0
tree_root = SubResource("AnimationNodeStateMachine_or4qq")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/flying = false
parameters/conditions/idling = false
parameters/conditions/switched_pole = false
parameters/conditions/walking = false
parameters/Flying/blend_position = 0.358566
parameters/Idle/blend_position = 0.431275
parameters/SwitchPole/blend_position = 0.363546
parameters/Walk/blend_position = 0.930279

[node name="DashCancelCollider" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="DashCancelCollider"]
position = Vector2(0, -9.25)
shape = SubResource("RectangleShape2D_knn7v")

[connection signal="area_entered" from="AttractionArea" to="." method="_on_entered_magnet_range"]
[connection signal="area_exited" from="AttractionArea" to="." method="_on_exited_magnet_range"]
[connection signal="area_entered" from="DashCancelCollider" to="StateMachine/floor_magnet_state" method="_on_floor_collision"]
[connection signal="body_entered" from="DashCancelCollider" to="StateMachine/floor_magnet_state" method="_on_floor_collision"]
